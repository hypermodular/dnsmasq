# Auto-generated by docker-gen

# Basic dnsmasq configuration
no-resolv
log-queries
log-facility=/dev/stdout

# Use Google DNS as upstream
server=8.8.8.8
server=8.8.4.4

# Local domain resolution
local=/test/
domain=test

# Generate DNS entries for running containers
{{ range $container := where . "State.Running" "eq" true }}
  {{ $name := index $container.Names 0 | trimPrefix "/" }}
  {{ range $network := $container.NetworkSettings.Networks }}
    {{ if ne $network.IPAddress "" }}
address=/{{ $name }}.test/{{ $network.IPAddress }}
    {{ end }}
  {{ end }}
{{ end }}
